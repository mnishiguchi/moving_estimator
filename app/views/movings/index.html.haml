- provide(:title, "My movings")

.profile_header{ style: "margin-top: 20px;" }
  %ul.media-list
    %li.media
      .media-left.pull-left
        %a{ href: movings_path }
          = gravatar_for current_user.email
        %figcaption.text-center
          = link_to "change", "http://gravatar.com/emails"
      .media-body
        %h2.media-heading
          = current_user.email
        %span.moving_count.badge
          = pluralize(current_user.movings.count, "moving")

.row
  / Left
  %aside.col-md-4
    %ul.nav.nav-pills{ style: "margin: 20px 0;" }
      %li= link_to "New moving", new_moving_path
      %li= link_to "Todo list", todos_path, :"data-no-turbolink" => true
    %canvas#chart_rooms{:height => "200", :width => "200"}

  / Right
  .col-md-8
    .panel.panel-default
      .panel-heading
        My movings
      .panel-body
        .table-responsive{ style: "margin-bottom: 0;" }
          %table.table.table-hover{ style: "margin-bottom: 0;" }
            - @movings.each do |m|
              %tr{ style: "border-bottom: 1px solid #ddd;" }
                %td
                  = link_to truncate(m.title), moving_path(m)
                %td
                  %i= truncate(m.description, length: 100)
                %td
                  = link_to fa_icon("fa trash", text: "delete"), moving_path(m),
                  method: :delete, data: { confirm: "Are you sure?" },
                    class: "btn btn-sm btn-default pull-right"
                  = link_to fa_icon("fa pencil", text: "edit"), edit_moving_path(m),
                    class: "btn btn-sm btn-default pull-right"

:coffee

  jQuery ->
    data = [
            {
                value: 300,
                color:"#F7464A",
                highlight: "#FF5A5E",
                label: "Red"
            },
            {
                value: 50,
                color: "#46BFBD",
                highlight: "#5AD3D1",
                label: "Green"
            },
            {
                value: 100,
                color: "#FDB45C",
                highlight: "#FFC870",
                label: "Yellow"
            }
          ]

    myNewChart = new Chart($("#chart_rooms").get(0).getContext("2d")).Pie(data)
